import{j as n,b as J,r as A,d as K,S as Q,a as X,u as Y,p as Z}from"./index-BCKiBu8O.js";const ee="_createListing_1eefx_1",te={createListing:ee},ae="_inputBox_1n7gl_1",se={inputBox:ae};function b(i){return n.jsx("input",{type:"text",placeholder:i.templateText,className:se.inputBox,id:i.id,name:i.name,value:i.value,onBlur:i.onBlur,onChange:i.onChange,required:i.required})}function w(i,v){return typeof i=="function"?i(v):i}function W(i,v){return U(v).reduce((t,s)=>{if(t===null)return null;if(typeof t<"u")return t[s]},i)}function k(i,v,a){const t=U(v);function s(r){if(!t.length)return w(a,r);const l=t.shift();if(typeof l=="string"||typeof l=="number"&&!Array.isArray(r))return typeof r=="object"?(r===null&&(r={}),{...r,[l]:s(r[l])}):{[l]:s()};if(Array.isArray(r)&&typeof l=="number"){const u=r.slice(0,l);return[...u.length?u:new Array(l),s(r[l]),...r.slice(l+1)]}return[...new Array(l),s()]}return s(i)}function re(i,v){const a=U(v);function t(s){if(!s)return;if(a.length===1){const l=a[0];if(Array.isArray(s)&&typeof l=="number")return s.filter((e,d)=>d!==l);const{[l]:u,...o}=s;return o}const r=a.shift();if(typeof r=="string"&&typeof s=="object")return{...s,[r]:t(s[r])};if(typeof r=="number"&&Array.isArray(s)){if(r>=s.length)return s;const l=s.slice(0,r);return[...l.length?l:new Array(r),t(s[r]),...s.slice(r+1)]}throw new Error("It seems we have created an infinite loop in deleteBy. ")}return t(i)}const ne=/^(\d*)$/gm,oe=/\.(\d*)\./gm,ie=/^(\d*)\./gm,le=/\.(\d*$)/gm,ue=/\.{2,}/gm,$="__int__",N=`${$}$1`;function U(i){if(Array.isArray(i))return[...i];if(typeof i!="string")throw new Error("Path must be a string.");return i.replaceAll("[",".").replaceAll("]","").replace(ne,N).replace(oe,`.${N}.`).replace(ie,`${N}.`).replace(le,`.${N}`).replace(ue,".").split(".").map(v=>v.indexOf($)===0?parseInt(v.substring($.length),10):v)}function de(i){return!(Array.isArray(i)&&i.length===0)}function q(i,v){const{asyncDebounceMs:a}=v,{onChangeAsync:t,onBlurAsync:s,onSubmitAsync:r,onBlurAsyncDebounceMs:l,onChangeAsyncDebounceMs:u}=v.validators||{},o=a??0,e={cause:"change",validate:t,debounceMs:u??o},d={cause:"blur",validate:s,debounceMs:l??o},c={cause:"submit",validate:r,debounceMs:0},m=g=>({...g,debounceMs:0});switch(i){case"submit":return[m(e),m(d),c];case"blur":return[d];case"change":return[e];case"server":default:return[]}}function L(i,v){const{onChange:a,onBlur:t,onSubmit:s}=v.validators||{},r={cause:"change",validate:a},l={cause:"blur",validate:t},u={cause:"submit",validate:s},o={cause:"server",validate:()=>{}};switch(i){case"submit":return[r,l,u,o];case"server":return[o];case"blur":return[l,o];case"change":default:return[r,o]}}function I(i){return{values:i.values??{},errors:i.errors??[],errorMap:i.errorMap??{},fieldMeta:i.fieldMeta??{},canSubmit:i.canSubmit??!0,isFieldsValid:i.isFieldsValid??!1,isFieldsValidating:i.isFieldsValidating??!1,isFormValid:i.isFormValid??!1,isFormValidating:i.isFormValidating??!1,isSubmitted:i.isSubmitted??!1,isSubmitting:i.isSubmitting??!1,isTouched:i.isTouched??!1,isBlurred:i.isBlurred??!1,isPristine:i.isPristine??!0,isDirty:i.isDirty??!1,isValid:i.isValid??!1,isValidating:i.isValidating??!1,submissionAttempts:i.submissionAttempts??0,validationMetaMap:i.validationMetaMap??{onChange:void 0,onBlur:void 0,onSubmit:void 0,onMount:void 0,onServer:void 0}}}const ce=i=>typeof i=="object";class he{constructor(v){var a;this.options={},this.fieldInfo={},this.prevTransformArray=[],this.mount=()=>{const{onMount:t}=this.options.validators||{};if(!t)return;const s=this.runValidator({validate:t,value:{value:this.state.values,formApi:this,validationSource:"form"},type:"validate"});s&&this.store.setState(r=>({...r,errorMap:{...r.errorMap,onMount:s}}))},this.update=t=>{if(!t)return;const s=this.options;this.options=t,this.store.batch(()=>{const r=t.defaultValues&&t.defaultValues!==s.defaultValues&&!this.state.isTouched,l=t.defaultState!==s.defaultState&&!this.state.isTouched;this.store.setState(()=>I(Object.assign({},this.state,l?t.defaultState:{},r?{values:t.defaultValues}:{})))})},this.reset=(t,s)=>{const{fieldMeta:r}=this.state,l=this.resetFieldMeta(r);t&&!(s!=null&&s.keepDefaultValues)&&(this.options={...this.options,defaultValues:t}),this.store.setState(()=>{var u;return I({...this.options.defaultState,values:t??this.options.defaultValues??((u=this.options.defaultState)==null?void 0:u.values),fieldMeta:l})})},this.validateAllFields=async t=>{const s=[];return this.store.batch(()=>{Object.values(this.fieldInfo).forEach(l=>{if(!l.instance)return;const u=l.instance;s.push(Promise.resolve().then(()=>u.validate(t))),l.instance.state.meta.isTouched||l.instance.setMeta(o=>({...o,isTouched:!0})),l.instance.state.meta.isBlurred||l.instance.setMeta(o=>({...o,isBlurred:!0}))})}),(await Promise.all(s)).flat()},this.validateArrayFieldsStartingFrom=async(t,s,r)=>{const l=this.getFieldValue(t),u=Array.isArray(l)?Math.max(l.length-1,0):null,o=[`${t}[${s}]`];for(let m=s+1;m<=(u??0);m++)o.push(`${t}[${m}]`);const e=Object.keys(this.fieldInfo).filter(m=>o.some(g=>m.startsWith(g))),d=[];return this.store.batch(()=>{e.forEach(m=>{d.push(Promise.resolve().then(()=>this.validateField(m,r)))})}),(await Promise.all(d)).flat()},this.validateField=(t,s)=>{var r;const l=(r=this.fieldInfo[t])==null?void 0:r.instance;return l?(l.state.meta.isTouched||l.setMeta(u=>({...u,isTouched:!0})),l.state.meta.isBlurred||l.setMeta(u=>({...u,isBlurred:!0})),l.validate(s)):[]},this.validateSync=t=>{const s=L(t,this.options);let r=!1;const l={};this.store.batch(()=>{for(const o of s){if(!o.validate)continue;const e=this.runValidator({validate:o.validate,value:{value:this.state.values,formApi:this,validationSource:"form"},type:"validate"}),{formError:d,fieldErrors:c}=O(e),m=_(o.cause);if(c)for(const[g,p]of Object.entries(c)){const V={...l[g]||{},[m]:p};l[g]=V;const x=this.getFieldMeta(g);x&&x.errorMap[m]!==p&&this.setFieldMeta(g,f=>({...f,errorMap:{...f.errorMap,[m]:p}}))}this.state.errorMap[m]!==d&&this.store.setState(g=>({...g,errorMap:{...g.errorMap,[m]:d}})),(d||c)&&(r=!0)}});const u=_("submit");return this.state.errorMap[u]&&t!=="submit"&&!r&&this.store.setState(o=>({...o,errorMap:{...o.errorMap,[u]:void 0}})),{hasErrored:r,fieldsErrorMap:l}},this.validateAsync=async t=>{const s=q(t,this.options);this.state.isFormValidating||this.store.setState(e=>({...e,isFormValidating:!0}));const r=[];let l;for(const e of s){if(!e.validate)continue;const d=_(e.cause),c=this.state.validationMetaMap[d];c==null||c.lastAbortController.abort();const m=new AbortController;this.state.validationMetaMap[d]={lastAbortController:m},r.push(new Promise(async g=>{let p;try{p=await new Promise((f,F)=>{setTimeout(async()=>{if(m.signal.aborted)return f(void 0);try{f(await this.runValidator({validate:e.validate,value:{value:this.state.values,formApi:this,validationSource:"form",signal:m.signal},type:"validateAsync"}))}catch(S){F(S)}},e.debounceMs)})}catch(f){p=f}const{formError:h,fieldErrors:V}=O(p);V&&(l=l?{...l,...V}:V);const x=_(e.cause);if(l)for(const[f,F]of Object.entries(l)){const S=this.getFieldMeta(f);S&&S.errorMap[x]!==F&&this.setFieldMeta(f,T=>({...T,errorMap:{...T.errorMap,[x]:F}}))}this.store.setState(f=>({...f,errorMap:{...f.errorMap,[x]:h}})),g(l?{fieldErrors:l,errorMapKey:x}:void 0)}))}let u=[];const o={};if(r.length){u=await Promise.all(r);for(const e of u)if(e!=null&&e.fieldErrors){const{errorMapKey:d}=e;for(const[c,m]of Object.entries(e.fieldErrors)){const p={...o[c]||{},[d]:m};o[c]=p}}}return this.store.setState(e=>({...e,isFormValidating:!1})),o},this.validate=t=>{const{hasErrored:s,fieldsErrorMap:r}=this.validateSync(t);return s&&!this.options.asyncAlways?r:this.validateAsync(t)},this.handleSubmit=async()=>{var t,s,r,l;if(this.store.setState(o=>({...o,isSubmitted:!1,submissionAttempts:o.submissionAttempts+1})),!this.state.canSubmit)return;this.store.setState(o=>({...o,isSubmitting:!0}));const u=()=>{this.store.setState(o=>({...o,isSubmitting:!1}))};if(await this.validateAllFields("submit"),!this.state.isValid){u(),(s=(t=this.options).onSubmitInvalid)==null||s.call(t,{value:this.state.values,formApi:this});return}this.store.batch(()=>{Object.values(this.fieldInfo).forEach(o=>{var e,d,c;(c=(d=(e=o.instance)==null?void 0:e.options.listeners)==null?void 0:d.onSubmit)==null||c.call(d,{value:o.instance.state.value,fieldApi:o.instance})})});try{await((l=(r=this.options).onSubmit)==null?void 0:l.call(r,{value:this.state.values,formApi:this})),this.store.batch(()=>{this.store.setState(o=>({...o,isSubmitted:!0})),u()})}catch(o){throw u(),o}},this.getFieldValue=t=>W(this.state.values,t),this.getFieldMeta=t=>this.state.fieldMeta[t],this.getFieldInfo=t=>{var s;return(s=this.fieldInfo)[t]||(s[t]={instance:null,validationMetaMap:{onChange:void 0,onBlur:void 0,onSubmit:void 0,onMount:void 0,onServer:void 0}})},this.setFieldMeta=(t,s)=>{this.store.setState(r=>({...r,fieldMeta:{...r.fieldMeta,[t]:w(s,r.fieldMeta[t])}}))},this.resetFieldMeta=t=>Object.keys(t).reduce((s,r)=>{const l=r;return s[l]={isValidating:!1,isTouched:!1,isBlurred:!1,isDirty:!1,isPristine:!0,errors:[],errorMap:{}},s},{}),this.setFieldValue=(t,s,r)=>{const l=(r==null?void 0:r.dontUpdateMeta)??!1;this.store.batch(()=>{l||this.setFieldMeta(t,u=>({...u,isTouched:!0,isBlurred:!0,isDirty:!0,errorMap:{...u==null?void 0:u.errorMap,onMount:void 0}})),this.store.setState(u=>({...u,values:k(u.values,t,s)}))})},this.deleteField=t=>{this.store.setState(s=>{const r={...s};return r.values=re(r.values,t),delete r.fieldMeta[t],r}),delete this.fieldInfo[t]},this.pushFieldValue=(t,s,r)=>{this.setFieldValue(t,l=>[...Array.isArray(l)?l:[],s],r),this.validateField(t,"change")},this.insertFieldValue=async(t,s,r,l)=>{this.setFieldValue(t,u=>[...u.slice(0,s),r,...u.slice(s)],l),await this.validateField(t,"change")},this.replaceFieldValue=async(t,s,r,l)=>{this.setFieldValue(t,u=>u.map((o,e)=>e===s?r:o),l),await this.validateField(t,"change"),await this.validateArrayFieldsStartingFrom(t,s,"change")},this.removeFieldValue=async(t,s,r)=>{const l=this.getFieldValue(t),u=Array.isArray(l)?Math.max(l.length-1,0):null;if(this.setFieldValue(t,o=>o.filter((e,d)=>d!==s),r),u!==null){const o=`${t}[${u}]`;Object.keys(this.fieldInfo).filter(d=>d.startsWith(o)).forEach(d=>this.deleteField(d))}await this.validateField(t,"change"),await this.validateArrayFieldsStartingFrom(t,s,"change")},this.swapFieldValues=(t,s,r,l)=>{this.setFieldValue(t,u=>{const o=u[s],e=u[r];return k(k(u,`${s}`,e),`${r}`,o)},l),this.validateField(t,"change"),this.validateField(`${t}[${s}]`,"change"),this.validateField(`${t}[${r}]`,"change")},this.moveFieldValues=(t,s,r,l)=>{this.setFieldValue(t,u=>(u.splice(r,0,u.splice(s,1)[0]),u),l),this.validateField(t,"change"),this.validateField(`${t}[${s}]`,"change"),this.validateField(`${t}[${r}]`,"change")},this.store=new J(I({...v==null?void 0:v.defaultState,values:(v==null?void 0:v.defaultValues)??((a=v==null?void 0:v.defaultState)==null?void 0:a.values),isFormValid:!0}),{onUpdate:()=>{var t,s,r,l;let{state:u}=this.store;const o=Object.values(u.fieldMeta),e=o.some(y=>y==null?void 0:y.isValidating),d=!o.some(y=>(y==null?void 0:y.errorMap)&&de(Object.values(y.errorMap).filter(Boolean))),c=o.some(y=>y==null?void 0:y.isTouched),m=o.some(y=>y==null?void 0:y.isBlurred);c&&((t=u==null?void 0:u.errorMap)!=null&&t.onMount)&&(u.errorMap.onMount=void 0);const g=o.some(y=>y==null?void 0:y.isDirty),p=!g,h=!!((s=u.errorMap)!=null&&s.onMount||o.some(y=>{var C;return(C=y==null?void 0:y.errorMap)==null?void 0:C.onMount})),V=e||u.isFormValidating;u.errors=Object.values(u.errorMap).reduce((y,C)=>C===void 0?y:typeof C=="string"?(y.push(C),y):(C&&ce(C)&&y.push(C.form),y),[]);const x=u.errors.length===0,f=d&&x,F=u.submissionAttempts===0&&!c&&!h||!V&&!u.isSubmitting&&f;u={...u,isFieldsValidating:e,isFieldsValid:d,isFormValid:x,isValid:f,canSubmit:F,isTouched:c,isBlurred:m,isPristine:p,isDirty:g},this.state=u,this.store.state=this.state;const S=((r=this.options.transform)==null?void 0:r.deps)??[];(S.length!==this.prevTransformArray.length||S.some((y,C)=>y!==this.prevTransformArray[C]))&&((l=this.options.transform)==null||l.fn(this),this.store.state=this.state,this.prevTransformArray=S)}}),this.state=this.store.state,this.update(v||{})}runValidator(v){const a=this.options.validatorAdapter;return a&&typeof v.validate!="function"?a()[v.type](v.value,v.validate):v.validate(v.value)}setErrorMap(v){this.store.setState(a=>({...a,errorMap:{...a.errorMap,...v}}))}}function O(i){if(i){if(typeof i=="object"){const v=O(i.form).formError,a=i.fields;return{formError:v,fieldErrors:a}}return typeof i!="string"?{formError:"Invalid Form Values"}:{formError:i}}return{formError:void 0}}function _(i){switch(i){case"submit":return"onSubmit";case"blur":return"onBlur";case"mount":return"onMount";case"server":return"onServer";case"change":default:return"onChange"}}class ve{constructor(v){this.options={},this.mount=()=>{var a,t;const s=this.getInfo();s.instance=this;const r=this.form.store.subscribe(()=>{this.store.batch(()=>{const u=this.getValue(),o=this.getMeta();u!==this.state.value&&this.store.setState(e=>({...e,value:u})),o!==this.state.meta&&this.store.setState(e=>({...e,meta:o}))})});this.update(this.options);const{onMount:l}=this.options.validators||{};if(l){const u=this.runValidator({validate:l,value:{value:this.state.value,fieldApi:this,validationSource:"field"},type:"validate"});u&&this.setMeta(o=>({...o,errorMap:{...o==null?void 0:o.errorMap,onMount:u}}))}return(t=(a=this.options.listeners)==null?void 0:a.onMount)==null||t.call(a,{value:this.state.value,fieldApi:this}),()=>{r()}},this.update=a=>{if(this.state.value===void 0){const t=W(a.form.options.defaultValues,a.name);a.defaultValue!==void 0?this.setValue(a.defaultValue,{dontUpdateMeta:!0}):t!==void 0&&this.setValue(t,{dontUpdateMeta:!0})}this._getMeta()===void 0&&this.setMeta(this.state.meta),this.options=a},this.getValue=()=>this.form.getFieldValue(this.name),this.setValue=(a,t)=>{var s,r;this.form.setFieldValue(this.name,a,t),(r=(s=this.options.listeners)==null?void 0:s.onChange)==null||r.call(s,{value:this.state.value,fieldApi:this}),this.validate("change")},this._getMeta=()=>this.form.getFieldMeta(this.name),this.getMeta=()=>this._getMeta()??{isValidating:!1,isTouched:!1,isBlurred:!1,isDirty:!1,isPristine:!0,errors:[],errorMap:{},...this.options.defaultMeta},this.setMeta=a=>this.form.setFieldMeta(this.name,a),this.getInfo=()=>this.form.getFieldInfo(this.name),this.pushValue=(a,t)=>this.form.pushFieldValue(this.name,a,t),this.insertValue=(a,t,s)=>this.form.insertFieldValue(this.name,a,t,s),this.replaceValue=(a,t,s)=>this.form.replaceFieldValue(this.name,a,t,s),this.removeValue=(a,t)=>this.form.removeFieldValue(this.name,a,t),this.swapValues=(a,t,s)=>this.form.swapFieldValues(this.name,a,t,s),this.moveValue=(a,t,s)=>this.form.moveFieldValues(this.name,a,t,s),this.getLinkedFields=a=>{const t=Object.values(this.form.fieldInfo),s=[];for(const r of t){if(!r.instance)continue;const{onChangeListenTo:l,onBlurListenTo:u}=r.instance.options.validators||{};a==="change"&&(l!=null&&l.includes(this.name))&&s.push(r.instance),a==="blur"&&(u!=null&&u.includes(this.name))&&s.push(r.instance)}return s},this.validateSync=(a,t)=>{const s=L(a,this.options),l=this.getLinkedFields(a).reduce((e,d)=>{const c=L(a,d.options);return c.forEach(m=>{m.field=d}),e.concat(c)},[]);let u=!1;this.form.store.batch(()=>{const e=(d,c)=>{const m=E(c.cause),g=c.validate?z(d.runValidator({validate:c.validate,value:{value:d.getValue(),validationSource:"field",fieldApi:d},type:"validate"})):t[m];d.state.meta.errorMap[m]!==g&&d.setMeta(p=>({...p,errorMap:{...p.errorMap,[E(c.cause)]:g||t[m]}})),(g||t[m])&&(u=!0)};for(const d of s)e(this,d);for(const d of l)d.validate&&e(d.field,d)});const o=E("submit");return this.state.meta.errorMap[o]&&a!=="submit"&&!u&&this.setMeta(e=>({...e,errorMap:{...e.errorMap,[o]:void 0}})),{hasErrored:u}},this.validateAsync=async(a,t)=>{const s=q(a,this.options),r=await t,l=this.getLinkedFields(a),u=l.reduce((m,g)=>{const p=q(a,g.options);return p.forEach(h=>{h.field=g}),m.concat(p)},[]);this.state.meta.isValidating||this.setMeta(m=>({...m,isValidating:!0}));for(const m of l)m.setMeta(g=>({...g,isValidating:!0}));const o=[],e=[],d=(m,g,p)=>{const h=E(g.cause),V=m.getInfo().validationMetaMap[h];V==null||V.lastAbortController.abort();const x=new AbortController;this.getInfo().validationMetaMap[h]={lastAbortController:x},p.push(new Promise(async f=>{var F;let S;try{S=await new Promise((P,H)=>{this.timeoutIds[g.cause]&&clearTimeout(this.timeoutIds[g.cause]),this.timeoutIds[g.cause]=setTimeout(async()=>{if(x.signal.aborted)return P(void 0);try{P(await this.runValidator({validate:g.validate,value:{value:m.getValue(),fieldApi:m,signal:x.signal,validationSource:"field"},type:"validateAsync"}))}catch(G){H(G)}},g.debounceMs)})}catch(P){S=P}if(x.signal.aborted)return f(void 0);const T=z(S),y=(F=r[this.name])==null?void 0:F[h],C=T||y;m.setMeta(P=>({...P,errorMap:{...P==null?void 0:P.errorMap,[h]:C}})),f(C)}))};for(const m of s)m.validate&&d(this,m,o);for(const m of u)m.validate&&d(m.field,m,e);let c=[];(o.length||e.length)&&(c=await Promise.all(o),await Promise.all(e)),this.setMeta(m=>({...m,isValidating:!1}));for(const m of l)m.setMeta(g=>({...g,isValidating:!1}));return c.filter(Boolean)},this.validate=a=>{var t;if(!this.state.meta.isTouched)return[];const{fieldsErrorMap:s}=this.form.validateSync(a),{hasErrored:r}=this.validateSync(a,s[this.name]??{});if(r&&!this.options.asyncAlways)return(t=this.getInfo().validationMetaMap[E(a)])==null||t.lastAbortController.abort(),this.state.meta.errors;const l=this.form.validateAsync(a);return this.validateAsync(a,l)},this.handleChange=a=>{this.setValue(a)},this.handleBlur=()=>{var a,t;this.state.meta.isTouched||(this.setMeta(r=>({...r,isTouched:!0})),this.validate("change")),this.state.meta.isBlurred||this.setMeta(r=>({...r,isBlurred:!0})),this.validate("blur"),(t=(a=this.options.listeners)==null?void 0:a.onBlur)==null||t.call(a,{value:this.state.value,fieldApi:this})},this.form=v.form,this.name=v.name,this.timeoutIds={},v.defaultValue!==void 0&&this.form.setFieldValue(this.name,v.defaultValue,{dontUpdateMeta:!0}),this.store=new J({value:this.getValue(),meta:this._getMeta()??{isValidating:!1,isTouched:!1,isBlurred:!1,isDirty:!1,isPristine:!0,errors:[],errorMap:{},...v.defaultMeta}},{onUpdate:()=>{const a=this.store.state;a.meta.errors=Object.values(a.meta.errorMap).filter(t=>t!==void 0),a.meta.isPristine=!a.meta.isDirty,this.prevState=a,this.state=a}}),this.state=this.store.state,this.prevState=this.state,this.options=v}runValidator(v){const a=[this.form.options.validatorAdapter,this.options.validatorAdapter];for(const t of a)if(t&&typeof v.validate!="function")return t()[v.type](v.value,v.validate);return v.validate(v.value)}setErrorMap(v){this.setMeta(a=>({...a,errorMap:{...a.errorMap,...v}}))}}function z(i){if(i)return typeof i!="string"?"Invalid Form Values":i}function E(i){switch(i){case"submit":return"onSubmit";case"blur":return"onBlur";case"mount":return"onMount";case"server":return"onServer";case"change":default:return"onChange"}}const R=typeof window<"u"?A.useLayoutEffect:A.useEffect;function me(i){const[v]=A.useState(()=>{const t=new ve({...i,form:i.form,name:i.name});return t.Field=B,t});return R(v.mount,[v]),R(()=>{v.update(i)}),K(v.store,i.mode==="array"?a=>[a.meta,Object.keys(a.value??[]).length]:void 0),v}const B=({children:i,...v})=>{const a=me(v),t=A.useMemo(()=>w(i,a),[i,a,a.state.value,a.state.meta]);return n.jsx(n.Fragment,{children:t})};function ge({form:i,selector:v,children:a}){const t=K(i.store,v);return w(a,t)}function pe(i){const[v]=A.useState(()=>{const a=new he(i),t=a;return t.Field=function(r){return n.jsx(B,{...r,form:a})},t.Subscribe=s=>n.jsx(ge,{form:a,selector:s.selector,children:s.children}),t});return R(v.mount,[]),K(v.store,a=>a.isSubmitting),R(()=>{v.update(i)}),v}const fe="_checkBox_1dhk2_1",ye="_option_1dhk2_11",be="_customCheckbox_1dhk2_19",Me="_checkmark_1dhk2_51",D={checkBox:fe,option:ye,customCheckbox:be,checkmark:Me};function xe({children:i,id:v,name:a,value:t,onBlur:s,onChange:r,required:l}){return n.jsx("div",{className:D.option,children:n.jsxs("label",{className:D.customCheckbox,children:[n.jsx("input",{type:"checkbox",id:v,name:a,onBlur:s,onChange:r,required:l,checked:t}),n.jsx("span",{className:D.checkmark}),i]})})}const Ce="_surveyContainer_rtwvd_1",Ve="_inputContainer_rtwvd_15",Se="_textBox_rtwvd_37",j={surveyContainer:Ce,inputContainer:Ve,textBox:Se};function M({field:i}){return n.jsxs(n.Fragment,{children:[i.state.meta.isTouched&&i.state.meta.errors.length?n.jsx("em",{children:i.state.meta.errors.join(", ")}):null,i.state.meta.isValidating?"Validating...":null]})}function je(i){return n.jsx("textarea",{placeholder:i.templateText,className:j.textBox,id:i.id,name:i.name,value:i.value,onBlur:i.onBlur,onChange:i.onChange,required:i.required,rows:5})}function Ae({listingDataProp:i,handleSubmit:v}){const[a,t]=A.useState(i),[s,r]=A.useState(!1);function l(){t({...a,dataSubProcessors:[...a.dataSubProcessors,{name:"",cvr:"",address:"",treatment:"",directSubProcessor:!1,transferReason:""}]}),r(!0)}const u=pe({defaultValues:{name:"",dataController:{name:a.dataController.name||"",cvr:a.dataController.cvr||"",address:a.dataController.address||"",phoneNo:a.dataController.phoneNo||"",mail:a.dataController.mail||""},dataProcessor:{name:a.dataProcessor.name||"",cvr:a.dataProcessor.cvr||"",address:a.dataProcessor.address||"",phoneNo:a.dataProcessor.phoneNo||"",mail:a.dataProcessor.mail||""},dataControllerRepresentative:{name:a.dataControllerRepresentative.name||"",role:a.dataControllerRepresentative.role||"",address:a.dataControllerRepresentative.address||"",phoneNo:a.dataControllerRepresentative.phoneNo||"",mail:a.dataControllerRepresentative.mail||""},dataProcessorRepresentative:{name:a.dataProcessorRepresentative.name||"",role:a.dataProcessorRepresentative.role||"",address:a.dataProcessorRepresentative.address||"",phoneNo:a.dataProcessorRepresentative.phoneNo||"",mail:a.dataProcessorRepresentative.mail||""},dataSecurityAdvisor:{name:a.dataSecurityAdvisor.name||"",address:a.dataSecurityAdvisor.address||"",phoneNo:a.dataSecurityAdvisor.phoneNo||"",mail:a.dataSecurityAdvisor.mail||""},dataSubProcessors:a.dataSubProcessors.map(e=>({name:e.name||"",cvr:e.cvr||"",address:e.address||"",treatment:e.treatment||"",directSubProcessor:e.directSubProcessor||!1,transferReason:e.transferReason,parentCompany:e.parentCompany})),dataTransfer:{transferInformation:""},dataSecurity:{securityMeasures:""},dataCategories:{categoryList:""}},onSubmit:async e=>{if(s){r(!1);return}console.log(await JSON.stringify(e.value)),v(e.value)}}),o=e=>{console.log(e)};return n.jsx("div",{className:j.surveyContainer,children:n.jsxs("form",{onSubmit:e=>{e.preventDefault(),e.stopPropagation(),u.handleSubmit()},children:[n.jsxs("div",{className:j.ContactInfoCont,children:[n.jsx(B,{form:u,name:"name",children:e=>n.jsxs("div",{className:j.inputContainer,children:[n.jsx("h1",{children:"Data Processor 30 Listing information"}),n.jsx(b,{templateText:"Enter listing name",id:e.name,name:e.name,value:e.state.value,onBlur:e.handleBlur,onChange:d=>{e.handleChange(d.target.value),o(d.target.value)},required:!1}),n.jsx(M,{field:e})]})}),n.jsx("div",{}),n.jsx(B,{form:u,name:"dataController",children:e=>{var d,c,m,g,p;return n.jsxs("div",{className:j.inputContainer,children:[n.jsx("h2",{children:"Data Controller Info"}),n.jsx(b,{id:"dataController.name",name:"dataController.name",templateText:"Company name",value:(d=e.state.value)==null?void 0:d.name,onBlur:e.handleBlur,onChange:h=>{e.handleChange({...e.state.value,name:h.target.value}),o(h.target.value)},required:!1}),n.jsx(M,{field:e}),n.jsx(b,{id:"dataController.cvr",name:"dataController.cvr",templateText:"CVR",value:(c=e.state.value)==null?void 0:c.cvr,onBlur:e.handleBlur,onChange:h=>{e.handleChange({...e.state.value,cvr:h.target.value}),o(h.target.value)},required:!1}),n.jsx(M,{field:e}),n.jsx(b,{id:"dataController.address",name:"dataController.address",templateText:"Address",value:(m=e.state.value)==null?void 0:m.address,onBlur:e.handleBlur,onChange:h=>{e.handleChange({...e.state.value,address:h.target.value}),o(h.target.value)},required:!1}),n.jsx(M,{field:e}),n.jsx(b,{id:"dataController.phoneNo",name:"dataController.phoneNo",templateText:"Phone number",value:(g=e.state.value)==null?void 0:g.phoneNo,onBlur:e.handleBlur,onChange:h=>{e.handleChange({...e.state.value,phoneNo:h.target.value}),o(h.target.value)},required:!1}),n.jsx(M,{field:e}),n.jsx(b,{id:"dataController.mail",name:"dataController.mail",templateText:"E-mail",value:(p=e.state.value)==null?void 0:p.mail,onBlur:e.handleBlur,onChange:h=>{e.handleChange({...e.state.value,mail:h.target.value}),o(h.target.value)},required:!1}),n.jsx(M,{field:e})]})}}),n.jsx(B,{form:u,name:"dataProcessor",children:e=>{var d,c,m,g,p;return n.jsxs("div",{className:j.inputContainer,children:[n.jsx("h2",{children:"Data Processor Info"}),n.jsx(b,{id:"dataProcessor.name",name:"dataProcessor.name",templateText:"Company name",value:(d=e.state.value)==null?void 0:d.name,onBlur:e.handleBlur,onChange:h=>{e.handleChange({...e.state.value,name:h.target.value}),o(h.target.value)},required:!1}),n.jsx(M,{field:e}),n.jsx(b,{id:"dataProcessor.cvr",name:"dataProcessor.cvr",templateText:"CVR",value:(c=e.state.value)==null?void 0:c.cvr,onBlur:e.handleBlur,onChange:h=>{e.handleChange({...e.state.value,cvr:h.target.value}),o(h.target.value)},required:!1}),n.jsx(M,{field:e}),n.jsx(b,{id:"dataProcessor.address",name:"dataProcessor.address",templateText:"Address",value:(m=e.state.value)==null?void 0:m.address,onBlur:e.handleBlur,onChange:h=>{e.handleChange({...e.state.value,address:h.target.value}),o(h.target.value)},required:!1}),n.jsx(M,{field:e}),n.jsx(b,{id:"dataProcessor.phoneNo",name:"dataProcessor.phoneNo",templateText:"Phone number",value:(g=e.state.value)==null?void 0:g.phoneNo,onBlur:e.handleBlur,onChange:h=>{e.handleChange({...e.state.value,phoneNo:h.target.value}),o(h.target.value)},required:!1}),n.jsx(M,{field:e}),n.jsx(b,{id:"dataProcessor.mail",name:"dataProcessor.mail",templateText:"E-mail",value:(p=e.state.value)==null?void 0:p.mail,onBlur:e.handleBlur,onChange:h=>{e.handleChange({...e.state.value,mail:h.target.value}),o(h.target.value)},required:!1}),n.jsx(M,{field:e})]})}}),n.jsx(B,{form:u,name:"dataControllerRepresentative",children:e=>{var d,c,m,g,p;return n.jsxs("div",{className:j.inputContainer,children:[n.jsx("h2",{children:"Data Controller Representative info"}),n.jsx(b,{id:"dataControllerRepresentative.name",name:"dataControllerRepresentative.name",templateText:"Name",value:(d=e.state.value)==null?void 0:d.name,onBlur:e.handleBlur,onChange:h=>{e.handleChange({...e.state.value,name:h.target.value}),o(h.target.value)},required:!1}),n.jsx(M,{field:e}),n.jsx(b,{id:"dataControllerRepresentative.role",name:"dataControllerRepresentative.role",templateText:"Role",value:(c=e.state.value)==null?void 0:c.role,onBlur:e.handleBlur,onChange:h=>{e.handleChange({...e.state.value,role:h.target.value}),o(h.target.value)},required:!1}),n.jsx(M,{field:e}),n.jsx(b,{id:"dataControllerRepresentative.address",name:"dataControllerRepresentative.address",templateText:"Address",value:(m=e.state.value)==null?void 0:m.address,onBlur:e.handleBlur,onChange:h=>{e.handleChange({...e.state.value,address:h.target.value}),o(h.target.value)},required:!1}),n.jsx(M,{field:e}),n.jsx(b,{id:"dataControllerRepresentative.phoneNo",name:"dataControllerRepresentative.phoneNo",templateText:"Phone number",value:(g=e.state.value)==null?void 0:g.phoneNo,onBlur:e.handleBlur,onChange:h=>{e.handleChange({...e.state.value,phoneNo:h.target.value}),o(h.target.value)},required:!1}),n.jsx(M,{field:e}),n.jsx(b,{id:"dataControllerRepresentative.mail",name:"dataControllerRepresentative.mail",templateText:"E-mail",value:(p=e.state.value)==null?void 0:p.mail,onBlur:e.handleBlur,onChange:h=>{e.handleChange({...e.state.value,mail:h.target.value}),o(h.target.value)},required:!1}),n.jsx(M,{field:e})]})}}),n.jsx(B,{form:u,name:"dataProcessorRepresentative",children:e=>{var d,c,m,g,p;return n.jsxs("div",{className:j.inputContainer,children:[n.jsx("h2",{children:"Data Processor Representative info"}),n.jsx(b,{id:"dataProcessorRepresentative.name",name:"dataProcessorRepresentative.name",templateText:"Name",value:(d=e.state.value)==null?void 0:d.name,onBlur:e.handleBlur,onChange:h=>{e.handleChange({...e.state.value,name:h.target.value}),o(h.target.value)},required:!1}),n.jsx(M,{field:e}),n.jsx(b,{id:"dataProcessorRepresentative.role",name:"dataProcessorRepresentative.role",templateText:"Role",value:(c=e.state.value)==null?void 0:c.role,onBlur:e.handleBlur,onChange:h=>{e.handleChange({...e.state.value,role:h.target.value}),o(h.target.value)},required:!1}),n.jsx(M,{field:e}),n.jsx(b,{id:"dataProcessorRepresentative.address",name:"dataProcessorRepresentative.address",templateText:"Address",value:(m=e.state.value)==null?void 0:m.address,onBlur:e.handleBlur,onChange:h=>{e.handleChange({...e.state.value,address:h.target.value}),o(h.target.value)},required:!1}),n.jsx(M,{field:e}),n.jsx(b,{id:"dataProcessorRepresentative.phoneNo",name:"dataProcessorRepresentative.phoneNo",templateText:"Phone number",value:(g=e.state.value)==null?void 0:g.phoneNo,onBlur:e.handleBlur,onChange:h=>{e.handleChange({...e.state.value,phoneNo:h.target.value}),o(h.target.value)},required:!1}),n.jsx(M,{field:e}),n.jsx(b,{id:"dataProcessorRepresentative.mail",name:"dataProcessorRepresentative.mail",templateText:"E-mail",value:(p=e.state.value)==null?void 0:p.mail,onBlur:e.handleBlur,onChange:h=>{e.handleChange({...e.state.value,mail:h.target.value}),o(h.target.value)},required:!1}),n.jsx(M,{field:e})]})}}),n.jsx(B,{form:u,name:"dataSecurityAdvisor",children:e=>{var d,c,m,g;return n.jsxs("div",{className:j.inputContainer,children:[n.jsx("h2",{children:"Data Security Advisor info"}),n.jsx(b,{id:"dataSecurityAdvisor.name",name:"dataSecurityAdvisor.name",templateText:"Name",value:(d=e.state.value)==null?void 0:d.name,onBlur:e.handleBlur,onChange:p=>{e.handleChange({...e.state.value,name:p.target.value}),o(p.target.value)},required:!1}),n.jsx(M,{field:e}),n.jsx(b,{id:"dataSecurityAdvisor.address",name:"dataSecurityAdvisor.address",templateText:"Address",value:(c=e.state.value)==null?void 0:c.address,onBlur:e.handleBlur,onChange:p=>{e.handleChange({...e.state.value,address:p.target.value}),o(p.target.value)},required:!1}),n.jsx(M,{field:e}),n.jsx(b,{id:"dataSecurityAdvisor.phoneNo",name:"dataSecurityAdvisor.phoneNo",templateText:"Phone number",value:(m=e.state.value)==null?void 0:m.phoneNo,onBlur:e.handleBlur,onChange:p=>{e.handleChange({...e.state.value,phoneNo:p.target.value}),o(p.target.value)},required:!1}),n.jsx(M,{field:e}),n.jsx(b,{id:"dataSecurityAdvisor.mail",name:"dataSecurityAdvisor.mail",templateText:"E-mail",value:(g=e.state.value)==null?void 0:g.mail,onBlur:e.handleBlur,onChange:p=>{e.handleChange({...e.state.value,mail:p.target.value}),o(p.target.value)},required:!1}),n.jsx(M,{field:e})]})}}),n.jsx("h2",{children:"Data Sub Processors"}),a.dataSubProcessors.map((e,d)=>n.jsx("div",{children:n.jsx(B,{form:u,name:`dataSubProcessors.${d}`,children:c=>{var m,g,p,h,V,x;return n.jsxs("div",{className:j.inputContainer,children:[n.jsxs("h3",{children:["Data Sub Processor Info ",d+1]}),n.jsx(b,{id:`dataSubProcessor.${d}.name`,name:`dataSubProcessor.${d}.name`,templateText:"Company name",value:(m=c.state.value)==null?void 0:m.name,onBlur:c.handleBlur,onChange:f=>{c.handleChange({...c.state.value,name:f.target.value}),o(f.target.value)},required:!1}),n.jsx(M,{field:c}),n.jsx(b,{id:`dataSubProcessor.${d}.cvr`,name:`dataSubProcessor.${d}.cvr`,templateText:"CVR",value:(g=c.state.value)==null?void 0:g.cvr,onBlur:c.handleBlur,onChange:f=>{c.handleChange({...c.state.value,cvr:f.target.value}),o(f.target.value)},required:!1}),n.jsx(M,{field:c}),n.jsx(b,{id:`dataSubProcessor.${d}.address`,name:`dataSubProcessor.${d}.address`,templateText:"Address",value:(p=c.state.value)==null?void 0:p.address,onBlur:c.handleBlur,onChange:f=>{c.handleChange({...c.state.value,address:f.target.value}),o(f.target.value)},required:!1}),n.jsx(b,{id:`dataSubProcessor.${d}.treatment`,name:`dataSubProcessor.${d}.treatment`,templateText:"treatment",value:(h=c.state.value)==null?void 0:h.treatment,onBlur:c.handleBlur,onChange:f=>{c.handleChange({...c.state.value,treatment:f.target.value}),o(f.target.value)},required:!1}),n.jsx(M,{field:c}),n.jsx(xe,{id:`dataSubProcessor.${d}.directSubProcessor`,name:`dataSubProcessor.${d}.directSubProcessor`,value:(V=c.state.value)==null?void 0:V.directSubProcessor,onBlur:c.handleBlur,onChange:f=>{c.handleChange({...c.state.value,directSubProcessor:f.target.checked}),o(f.target.checked.toString())},children:"Is KMD the sub-processor"}),n.jsx(M,{field:c}),n.jsx("h4",{children:"Transfer reason"}),n.jsx(je,{id:`dataSubProcessor.${d}.transferReason`,name:`dataSubProcessor.${d}.transferReason`,templateText:"Enter transfer reason",value:(x=c.state.value)==null?void 0:x.transferReason,onBlur:c.handleBlur,onChange:f=>{c.handleChange({...c.state.value,transferReason:f.target.value}),o(f.target.value)},required:!1})]})}})},d)),n.jsx("button",{onClick:l,className:j.addButton,children:"Add Data Processor"})]}),n.jsx(Q,{type:"submit",disabled:!u.state.canSubmit,children:u.state.isSubmitting?"...":"Submit"})]})})}const Fe={name:null,dataController:{name:null,address:null,phoneNo:null,mail:null,cvr:null},dataProcessor:{name:null,address:null,phoneNo:null,mail:null,cvr:null},dataControllerRepresentative:{name:null,address:null,phoneNo:null,mail:null,role:null},dataProcessorRepresentative:{name:null,address:null,phoneNo:null,mail:null,role:null},dataSecurityAdvisor:{name:null,address:null,phoneNo:null,mail:null},dataCategories:{categoryList:null},dataSecurity:{securityMeasures:null},dataTransfer:{transferInformation:null},dataSubProcessors:[{name:null,cvr:null,address:null,treatment:null,directSubProcessor:null,transferReason:null}]},Te=X("/create-listing/")({component:Be});function Be(){const i=Y(),[v,a]=A.useState(null),t=A.useRef(!1);A.useEffect(()=>{if(!t.current){const r=localStorage.getItem("listingData");localStorage.removeItem("listingData"),a(r?JSON.parse(r):Fe)}t.current=!0},[]);async function s(r){const l=await Z(r);i({to:"/listing/$listingId",params:{listingId:l.toString()}})}return n.jsx("main",{className:te.createListing,children:n.jsx("div",{children:v?n.jsx(Ae,{listingDataProp:v,handleSubmit:s}):"Loading..."})})}export{Te as Route};
